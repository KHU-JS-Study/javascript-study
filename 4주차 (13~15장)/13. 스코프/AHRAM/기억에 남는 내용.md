# 13. 스코프

- 스코프는 식별자가 유효한 범위를 뜻한다. 모든 식별자는 자신이 선언된 위치에 의해 다른 코드가 식별자 자신을 참조할 수 있는 유효 범위가 결정된다. 이를 스코프라고 하는 것이다.
  - var 키워드로 선언한 변수와 let 또는 const 키워드로 선언한 변수의 스코프도 다르게 동작한다.
  - 함수의 매개변수는 함수 몸체 내부에서만 참조할 수 있고 함수 몸체 외부에서는 참조할 수 없다고 했다. 이것은 매개변수를 참조할 수 있는 유효범위, 즉 매개변수의 스코프가 함수 몸체 내부로 한정되기 때문이다.
  
```javascript
function add(x, y) {
	// 매개변수는 함수 몸체 내부에서만 참조할 수 있다.
	// 즉, 매개변수는 스코프(유효범위)는 함수 몸체 내부다.
	console.log(x, y); // 2 5
	return x + y;
}

add(2, 5);
```
***스코프라는 개념이 있다면, 함수 내부의 식별자명과 함수 외부의 식별자명이 같아도 따로 작동하긴한다. 그러나 중요한 점은 식별자는 어떤 값을 구별할 수 있어야 하므로 유일해야한다는 점이다. 따라서 하나의 값은 유일한 식별자에 연결되도록 설계하는 것이 좋다.***

- var 키워드로 선언된 변수는 같은 스코프 내에서 중복 선언을 허용한다. var 키워드로 선언된 변수는 같은 스코프 내에서 중복 선언을 허용한다.

- 코드는 전역과 지역으로 구분할 수 있다.
  - 전역 변수는 어디서든지 참조할 수 있는 코드의 가장 바깥 영역을 말한다. 지역이란 함수 몸체 내부를 뜻하며 지역 변수는 자신의 지역 스코프와 하위 지역 스코프에서 유효하다.
  - 스코프가 함수의 중첩에 의해 계층적 구조를 갖는다.
  - 스코프가 계층적으로 연결된 것을 스코프 체인이라고 한다.

```javascript

var x = 1;

if (true) {
	// var 키워드로 선언된 변수는 함수의 코드 블록(함수 몸체)만을 지역 스코프로 인정한다.
	// 함수 밖에서 var 키워드로 선언된 변수는 코드 블록 내에서 선언되었다 할지라도 모두 전역 변수다.
	// 따라서 x는 전역 변수다. 이미 선언된 전역 변수 x가 있으므로 x 변수는 중복 선언된다.
	// 이는 의도치 않게 변수 값이 변경되는 부작용을 발생시킨다.
	var x = 10;
}

console.log(x); // 10
```
- 위와 같이 var 키워드로 선언된 변수는 오로지 함수의 코드 블록(함수 몸체)만을 지역 스코프로 인정한다. 이러한 특성을 함수 레벨 스코프라고 한다.
- 자바스크립트는 렉시컬 스코프를 따르므로 함수를 어디서 호출했는지가 아니라 함수를 어디서 정의했는지에 따라 상위 스코프를 결정한다. 함수가 호출된 위치는 상위 스코프 결정에 어떠한 영향도 주지 않는다.
